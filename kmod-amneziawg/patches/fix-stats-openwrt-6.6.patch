--- a/src/compat.h
+++ b/src/compat.h
@@ -68,6 +68,15 @@
 #include "udp_tunnel/udp_tunnel_partial_compat.h"
 #endif
 
+/* 
+ * Workaround for OpenWrt 24.10 (Linux 6.6) and other custom kernels 
+ * where NETDEV_PCPU_STAT_TSTATS auto-allocation might fail or behave unexpectedly.
+ * We force manual tstats allocation which is stable across all versions.
+ */
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(6, 6, 0)
+#define COMPAT_CANNOT_USE_PCPU_STAT_TYPE
+#endif
+
 #if LINUX_VERSION_CODE < KERNEL_VERSION(4, 3, 0) && !defined(DEBUG) && defined(net_dbg_ratelimited)
 #undef net_dbg_ratelimited
 #define net_dbg_ratelimited(fmt, ...) do { if (0) no_printk(KERN_DEBUG pr_fmt(fmt), ##__VA_ARGS__); } while (0)
--- a/src/device.c
+++ b/src/device.c
@@ -438,7 +438,7 @@ static const struct net_device_ops netdev_ops = {
 	.ndo_open		= wg_open,
 	.ndo_stop		= wg_stop,
 	.ndo_start_xmit		= wg_xmit,
-#ifndef COMPAT_CANNOT_USE_PCPU_STAT_TYPE
+#if !defined(COMPAT_CANNOT_USE_PCPU_STAT_TYPE) || LINUX_VERSION_CODE >= KERNEL_VERSION(5, 11, 0)
 	.ndo_get_stats64 = dev_get_tstats64
 #endif
 };
